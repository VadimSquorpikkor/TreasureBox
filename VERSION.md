# TreasureBox

## Список версий

* <b>1.00 - 28/08/21</b>
1. Initial commit. Добавлены зависимости для Firebase, приложение зарегистрировано на Firebase, скачан json конфиг
2. Кнопки.
3. Кнопки и проверка пароля
* <b>1.01 - 05/09/21</b>
1. Создан класс Entity -- сущность для "карточки" хранящей поля паролей/логинов
2. Создан класс FirebaseDBHelper для работы с базой данных (посредник между приложением и Firebase)
3. Создан класс MainViewModel
4. Добавлен README.md и VERSION.md
* <b>1.02 - 06/09/21</b>
1. Перенесена "лоика" из активити в viewModel
2. Настроен Firebase, теперь при правильном пароле данные из БД отображаются в приложении
3. Изменены цвет и размер кнопок, добавлены доп. кнопки
4. Добавлена кнопка "Clear" для обнуления вводимого пароля
5. Добавлена кнопка "ОК" для подтверждения окончания ввода пароля (попытка войти в БД)
6. Добавлен TextView для отображения вводимого пароля в виде "звездочек"
* <b>1.03 - 08/09/21</b>
1. При вводе пароля и нажатии "ок" приложение проверяет наличие такого пользователя и, если пользователь существует, проверяет пароль. Если пароль совпал (с паролем, который хранится в БД), то качаются все документы из коллекции (в Mutable<ArrayList>)
* <b>1.04 - 10/09/21</b>
1. Добавлен RecyclerView для вывода полученных данных из БД
* <b>1.05 - 11/10/21</b>
1. Добавлено шифрование данных при записи в БД и дешифровка при чтении из БД
2. Добавлен диалог ввода новых данных
3. Переделано: вместо одной активити теперь активити + фрагмент пароля + фрагмент списка
4. Темная тема, App, BaseDialog
* <b>1.06 - 12/10/21</b>
1. Переделан адаптер
2. Изменен метод шифрования. Теперь AES (класс AESCrypt, Encrypter2)
3. Добавлен лисенер новых событий в коллекции: при добавлении новой заметки изменения сразу же отображаются в списке
4. Если нажать кнопку "Назад", находясь на фрагменте списка, то доступ к БД закроется, придется заново вводить пароль
* <b>1.07 - 14/10/21</b>
1. Добавлен вход по логину. Теперь приложение может использовать несколько пользователей
2. Чтобы добавить новую учетку, надо ввести новый логин, пароль и одновременно нажать "1" "CL" "OK". Если такой пользователь (с таким логином) уже есть, ничего не получится
3. Добавлены поля "email" и поле для дополнительной инфы (поле без названия)
* <b>1.08 - 15/10/21</b>
1. Сначала сделал так: пароль к ключу шифрования один общий (было: у каждого пользователя свой. Но в этом случае, если жена забудет свой логин, я уже не прочитаю её данные в БД), но всё таки потом сделал как и было
2. Документ с паролем не загружаем
3. При долгом нажатии на элемент списка открывается диалог удаления записи. При нажатии "Удалить" документ с соответствующей заметкой удаляется из БД
* <b>1.09 - 15/10/21</b>
1. Добавлено безопасности: теперь название коллекции тоже зашифровано (раньше, по сути, имя коллекции пользователя — это ключ к шифрованию). Итого: шифруются значения и имя коллекции, ключ шифрования у каждого пользователя свой
* <b>1.10 - 27/10/21</b>
1. Добавлено: при клике на элемент списка открывается диалог для изменения параметров выбранной записи
* <b>1.11 - 29/10/21</b>
1. Упорядочена логика: login -> main_key
* <b>1.12 - 29/10/21</b>
1. Коллекции теперь называются логином пользователя
2. Ключ шифрования теперь — это комбинация логина и пароля
3. Если поле — это "", то оно не шифруется (в коллекции так и отображается: "")
4. Исправлено: были перепутаны поля логина и пароля
5. Выровнял по-другому фрагмент пароля
6. Добавил виброотклик на кнопки (эксперимент)
* <b>1.13 - 02/11/21</b>
1. Мега обновление. Подправлена архитектура: теперь ни один класс приложения (ни адаптер, ни helper, ни viewModel, ни диалоги) ничего не знают о наличии шифрования. Шифрование и дешифрование происходит в классе Bridge. Этот клас является "прослойкой" между DBHelper (который получает из БД данные в зашифрованном виде) и ViewModel, которая работает с данными в расшифрованном виде. ViewModel и DBHelper обмениваются данными через Bridge, который является по сути переводчиком, и не в курсе, что общаются друг с другом на разных языках. Соответственно теперь данные в ViewModel можно будет и сортировать и искать, так как теперь они уже на этом этапе расшифрованы
* <b>1.14 - 03/11/21</b>
1. Добавлен механизм категоризации заметок, отображение заметок в зависимости от выбранной категории. Потом займусь UI для всего этого, пока категория выбирается через ввод названия категории в соответствующий EditText
* <b>1.15 - 11/11/21</b>
1. FloatingButton заменен на ImageView
2. Добавлен поиск по имени. При вводе слова в поле поиска, поиск стартует автоматом. Если пустое, или длина запроса меньше 2 символов, поиск игнорируется. Поиск ищет совпадения в независимости от регистра
3. Поле поиска, избранного и кнопка добавления новой записи перенесены в новую нижнюю панельку
4. Добавлена сортировка списка в алфавитном порядке. Сортируются в не зависимости от регистра
* <b>1.16 - 02/03/22</b>
1. Вместо EditText категорий теперь спиннер. При выборе категории в спиннере отображаются заметки этой категории (пока только 2 категории, потом добавлю добавление/редактирование/сохранение категорий). В InputEntityDialog теперь категория выбирается также из спиннера.
2. Улучшен дизайн диалога InputEntityDialog
